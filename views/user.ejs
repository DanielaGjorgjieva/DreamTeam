<!-- this ejs takes a user object as input
User:
{
    username: "",
    password: "",
    created: [],
    joined: [],
}
 -->

<main id="about">
    <section class="title">
        <h1>Your Profile: <%=user.username%></h1>
    </section>

    <section class="profile">

        <h3>Your Activities:</h3>

        <% if(created.length == 0){ %>

        You haven't created any events yet

        <% } else {%>

        <section id="sports_table_user">
            <header>
                <span></span>
                <a href="sport.html?sort=sport">Sport</a>
                <a href="sport.html?sort=sport">Owner</a>
                <a href="sport.html?sort=desc">Description</a>
                <a href="sport.html?sort=place">Place</a>
                <a href="sport.html?sort=date">Starting Date</a>
                <a href="sport.html?sort=max_number">Frequency</a>
                <a href="sport.html?sort=max_number">Members</a>
                <span></span>
                <span></span>
            </header>

            <% for(let index = 0; index < created.length; index++){ 
                let event = created[index]%>

            <article class="sport" id="<%= event._id%>">
                <a id="<%=event._id%>" rel="link" onclick="visitEvent(this.id)">Link</a>
                <span class="sport"><%=event.sport%></span>
                <span class="owner"><%=event.owner%></span>
                <span class="description"><%=event.description%></span>
                <span class="place"><%=event.place%></span>
                <span class="starting_date"><%=event.date%></span>
                <span class="date"><%=event.frequency%></span>
                <span class="Number of Members"><%=event.members.length%>/<%=event.max_members%></span>
                <a rel="edit" id="edit_sport" href="/sports/<%= event._id%>/edit">Edit</a>
                <a rel="delete" id="delete_button" class="<%= event._id%>" >Delete</a>
            </article>

            <%}%>
        </section>
        <%}%>

        <h3>Events you joined:</h3>

        <% if(joined.length == 0){ %>

            You haven't joined any events yet
    
            <% } else {%>
    
            <section id="sports_table_user">
                <header>
                    <span></span>
                    <a href="sport.html?sort=sport">Sport</a>
                    <a href="sport.html?sort=sport">Owner</a>
                    <a href="sport.html?sort=desc">Description</a>
                    <a href="sport.html?sort=place">Place</a>
                    <a href="sport.html?sort=date">Starting Date</a>
                    <a href="sport.html?sort=max_number">Frequency</a>
                    <a href="sport.html?sort=max_number">Members</a>
                    <span></span>
                    <span></span>
                </header>
    
                <% for(let index = 0; index < joined.length; index++){ 
                    let event = joined[index]%>
    
                <article class="sport">
                    <a id="<%=event._id%>" rel="link" onclick="visitEvent(this.id)">Link</a>
                    <span class="sport"><%=event.sport%></span>
                    <span class="owner"><%=event.owner%></span>
                    <span class="description"><%=event.description%></span>
                    <span class="place"><%=event.place%></span>
                    <span class="starting_date"><%=event.date%></span>
                    <span class="date"><%=event.frequency%></span>
                    <span class="Number of Members">  <%=event.members.length%> /  <%=event.max_members%></span>
                    <section></section>
                    <section></section>
                </article>
                <%}%>
            </section>
            <%}%>

        <h3>If you really want to exit...</h3>
        <button onclick="LogOutUser()">Log Out</button>

    </section>
</main>